{% load custom_tags %}
{% load static %}
<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- links -->
    <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:200,300,400,600,700,800,900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="..\static\css\animate.css">
    <link rel="stylesheet" href="..\static\css\owl.theme.default.min.css">
    <link rel="stylesheet" href="..\static\css\magnific-popup.css">
    <link rel="stylesheet" href="..\static\css\owl.carousel.min.css">
    <link rel="stylesheet" href="..\static\css\flaticon.css">
    <link rel="stylesheet" href="..\static\css\style.css">








    <!-- AJAX BEGINS HERE -->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <script>












        $(document).ready(function () {

            $(document).on("click", "li.cart_class", function () {
                $.ajax({
                    url: "{% url 'shop:add_to_cart' %}",
                    type: 'POST',
                    data: {
                        'csrfmiddlewaretoken': '{{csrf_token}}',
                        'id_of_selected_prod': this.id,
                    },
                    dataType: 'json',
                    success: function (resp) {
                        //alert(resp.id_of_selected_prod)

                        //$("#" + resp.id_of_selected_prod).html(resp.c_html);
                        $("#" + resp.id_of_selected_prod).replaceWith(resp.c_html);
                    }
                });
            });



            $("#popcart").click(function () {

                $.ajax({

                    url: "show_cart_items",
                    type: "POST",
                    data: {},
                    dataType: 'json',
                    success: function (resp) {
                        popStr = resp.cart_items_texts;
                        alert(popStr);
                        document.getElementById('popcart').setAttribute('data-content', popStr);

                    }
                });

                //popStr = "Osldjfl"
                //popStr = "This is amazing"

                $('#popcart').popover('show');


            });



        });













            // *********************************** TESTING BUTTON FOR AJAX ******************************************************************** 

            //     AJAX sach me kaam krta hai




            //            $(".all").click(function () {


            //                $.ajax({
            //                    url: 'add_to_cart',
            //                    type: 'POST',
            //                    data: {
            //                        'csrfmiddlewaretoken': '{{csrf_token}}',
            //                        'task': 'minus',
            //                        'id_of_selected_prod': this.id,
            //                    },
            //                    dataType: 'json',
            //                    success: function (resp) {
            //                        alert(resp.id_of_selected_prod)
            //
            //                      $("#" + resp.id_of_selected_prod).html(resp.c_html);
            //                    }
            //                });
            //            });

            // *********************************** TESTING BUTTON FOR AJAX ******************************************************************** 

    </script>

    <!-- AJAX ENDS  HERE -->


    <!-- <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css"> -->
</head>

<body>

    <div class="container">
        <!-- navbar started -->
        <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light shop" id="ftco-navbar">
            <div class="container navbar">
                <a class="navbar-brand" href="home.html">The<span>F</span>armer</a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav"
                    aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="oi oi-menu"></span> Menu
                </button>
                <div class="collapse navbar-collapse" id="ftco-nav">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item active"><a href="index.html" class="nav-link">Home</a></li>
                        <li class="nav-item"><a href="about.html" class="nav-link">weather</a></li>
                        <li class="nav-item"><a href="work.html" class="nav-link">Work</a></li>
                        <li class="nav-item"><a href="blog.html" class="nav-link">Blog</a></li>
                        <li class="nav-item"><a href="contact.html" class="nav-link">Contact</a></li>
                    </ul>

                    <button type="button" class="btn btn-secondary mx-2" id="popcart" data-container="body"
                        data-toggle="popover" data-placement="bottom" data-html="true" data-content="Vivamus
                                    sagittis lacus vel augue laoreet rutrum faucibus.">
                        <!-- Cart(<span id="cart">0</span>) -->
                        Cart(0)
                    </button>
                </div>
            </div>
        </nav>
        <!-- ended navbar -->
    </div>


    <!-- ============================================================================================================= -->


    <!-- Table added -->
    <section class="ftco-section-2 ftco-animate my_shop shop">
        <div class="container">
            <div class="row">
                <div class="mytables">
                    <table class="mytable">
                        <tr>
                            <th>Features</th>
                        </tr>
                        <tr>
                            <td>herbicides</td>
                        </tr>
                        <tr>
                            <td>insecticides</td>
                        </tr>
                        <tr>
                            <td>fungicides</td>
                        </tr>
                        <tr>
                            <td>pesticides</td>
                        </tr>
                        <tr>
                            <td>pesticides</td>
                        </tr>
                        <tr>
                            <td>pesticides</td>
                        </tr>
                        <tr>
                            <td>pesticides</td>
                        </tr>
                        <tr>
                            <td style="border-bottom-left-radius: 5px; border-bottom-right-radius: 5px; ">cattle feed
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="myimage">
                    <div class="myinput">
                        <input type="text" name="search" placeholder="Search..">
                        <button type="submit" class="btn btn-dark">Search</button>
                    </div>
                    <div class="myimage-2">
                        <img src="https://adventures365.in/blog/wp-content/uploads/2016/03/Jal-Mahal-Jaipur.jpg" alt="">
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- =============================================================================================================== -->

    <!-- Featured Section Begin -->
    <section class="featured spad">
        <div class="container mb-5 pb-5">
            <div class="row">
                <div class="col-lg-12">
                    <div class="section-title">
                        <h2>Featured Product</h2>
                    </div>
                    <div class="featured__controls">
                        <ul>
                            <li class="active" data-filter="*">All</li>

                            {% for category in categories  %}
                            <li data-filter=".{{category}}">{{category}}</li>
                            {% endfor %}
                            {% comment %} <li data-filter=".oranges">Oranges</li>
                            <li data-filter=".fresh-meat">Fresh Meat</li>
                            <li data-filter=".vegetables">Vegetables</li>
                            <li data-filter=".fastfood">Fastfood</li> {% endcomment %}
                        </ul>
                    </div>
                </div>
            </div>
            <div class="row featured__filter">

                {% for product in products_lis  %}



                <div class="col-lg-3 col-md-4 col-sm-6 mix {{product.category}}">
                    <div class="featured__item">
                        <div class="featured__item__pic set-bg" data-setbg="{{product.image}}">
                            <ul class="featured__item__pic__hover">
                                <li><a href="#"><i class="fa fa-heart"></i></a></li>
                                <li><a href="#"><i class="fa fa-retweet"></i></a></li>

                                {% if product.inCart %}
                                <li id="{{product.product_id}}" class="active cart_class"><a><i
                                            class="fa fa-shopping-cart"></i></a></li>
                                {% else %}

                                <li id="{{product.product_id}}" class="cart_class"><a><i
                                            class="fa fa-shopping-cart"></i></a></li>
                                {% endif %}





                                <!-- ***********************************TESTING BUTTON FOR AJAX******************************************************************** -->
                                <!-- ? FOR ITS COMMENTED (AJAX FUNCTION) search   =====>   "AJAX sach me kaam krta hai" -->
                                <!-- <div>
                                                                                    <button id="{{product.product_id}}"
                                                                                        class=" all btn btn-success">Success</button>
                                                                                </div> -->
                                <!-- <button id='{{product.product_id}}' type="button"
                                                                                    class="all btn btn-success">Success</button> -->
                                <!-- ***********************************TESTING BUTTON FOR AJAX******************************************************************** -->





                                <form action="product_details" method="POST">
                                    <input type="hidden" name="product_id" value={{product.product_id}}>

                                    {% csrf_token %}
                                    <button type="submit" class="btn btn-success">QV</button>
                                </form>
                                <!-- <div> <button type="button" class="btn btn-success">Success</button> </div> -->
                            </ul>
                        </div>
                        <div class="featured__item__text">
                            <h6><a href="#">{{product.product_name}}</a></h6>
                            <h5>â‚¹{{product.price}}</h5>
                        </div>
                    </div>
                </div>

                {% endfor %}


            </div>
    </section>
    <!-- Featured Section End -->


    <!-- =============================================================================================================== -->

    <!-- Main features in cards -->
    <section class="ftco-section">
        <div class=" d-flex align-items-center">
            <div class="container">
                <div class="row justify-content-center mb-5">
                    <div class="col-md-8 text-center heading-section ftco-animate">

                        <a href="{% url 'shop:testing' %}">
                            <h2 class="mb-3">Heading</h2>
                        </a>

                    </div>
                </div>


                <div class="row d-flex justify-content-center">

                    {% for category in categories %}

                    <div class="col-md-3 ftco-animate">
                        <div class="blog-entry-2">

                            <form action="category_preview" method="POST"> {% csrf_token %}

                                <input type="hidden" name="cat_selected" value={{category}}>

                                <a href="blog-single.html" class="block-20-3"
                                    style="background-image: url(../static/images/weather2.jpg);">
                                    <div class="thistext">{{category}}</div>
                                </a>
                                <center><button class='btn-btn-danger' type="submit"> <b> Show More {{category}}
                                            products </b></button>
                                </center>

                            </form>

                        </div>
                    </div>
                    {% endfor %}

                </div>
            </div>
        </div>
        <div class="degree-left"></div>
    </section>
    <!-- Main features to be shown ended -->


    <!-- ============================================================================================================== -->

    <section class="ftco-section testimony-section">
        <div class="container">
            <div class="row justify-content-center mb-5">
                <div class="col-md-8 text-center heading-section ftco-animate">
                    <h2 class="mb-3">Recently updated</h2>
                </div>
            </div>
            <div class="row ftco-animate mb-4">
                <div class="col-md-12">
                    <div class="carousel-testimony owl-carousel">
                        <div class="item">
                            <div class="testimony-wrap py-4">
                                <div class="text">
                                    <span class="fa fa-shopping-cart"></span>
                                    <div class="d-flex align-items-center">
                                        <div class="user-img"
                                            style="background-image: url(../static/images/featured/feature-2.jpg)">
                                        </div>
                                        <div class="pl-3">
                                            <p class="name">fruit</p>
                                            <span class="position">fruit price</span>
                                        </div>
                                    </div>
                                    <p class="mb-4">Far far away, behind the word mountains, far from the countries
                                        Vokalia
                                        and Consonantia, there live the blind texts.</p>
                                </div>
                            </div>
                        </div>
                        <div class="item">
                            <div class="testimony-wrap py-4">
                                <div class="text">
                                    <span class="fa fa-shopping-cart"></span>
                                    <div class="d-flex align-items-center">
                                        <div class="user-img"
                                            style="background-image: url(../static/images/featured/feature-2.jpg)">
                                        </div>
                                        <div class="pl-3">
                                            <p class="name">fruit</p>
                                            <span class="position">fruit price</span>
                                        </div>
                                    </div>
                                    <p class="mb-4">Far far away, behind the word mountains, far from the countries
                                        Vokalia
                                        and Consonantia, there live the blind texts.</p>
                                </div>
                            </div>
                        </div>
                        <div class="item">
                            <div class="testimony-wrap py-4">
                                <div class="text">
                                    <span class="fa fa-shopping-cart"></span>
                                    <div class="d-flex align-items-center">
                                        <div class="user-img"
                                            style="background-image: url(../static/images/featured/feature-2.jpg)">
                                        </div>
                                        <div class="pl-3">
                                            <p class="name">fruit</p>
                                            <span class="position">fruit price</span>
                                        </div>
                                    </div>
                                    <p class="mb-4">Far far away, behind the word mountains, far from the countries
                                        Vokalia
                                        and Consonantia, there live the blind texts.</p>
                                </div>
                            </div>
                        </div>
                        <div class="item">
                            <div class="testimony-wrap py-4">
                                <div class="text">
                                    <span class="fa fa-shopping-cart"></span>
                                    <div class="d-flex align-items-center">
                                        <div class="user-img"
                                            style="background-image: url(../static/images/featured/feature-2.jpg)">
                                        </div>
                                        <div class="pl-3">
                                            <p class="name">fruit</p>
                                            <span class="position">fruit price</span>
                                        </div>
                                    </div>
                                    <p class="mb-4">Far far away, behind the word mountains, far from the countries
                                        Vokalia
                                        and Consonantia, there live the blind texts.</p>
                                </div>
                            </div>
                        </div>
                        <div class="item">
                            <div class="testimony-wrap py-4">
                                <div class="text">
                                    <span class="fa fa-shopping-cart"></span>
                                    <div class="d-flex align-items-center">
                                        <div class="user-img"
                                            style="background-image: url(../static/images/featured/feature-2.jpg)">
                                        </div>
                                        <div class="pl-3">
                                            <p class="name">fruit</p>
                                            <span class="position">fruit price</span>
                                        </div>
                                    </div>
                                    <p class="mb-4">Far far away, behind the word mountains, far from the countries
                                        Vokalia
                                        and Consonantia, there live the blind texts.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>


    <!-- ============================================================================================================== -->


    <!-- loader -->
    <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px">
            <circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee" />
            <circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10"
                stroke="#F96D00" />
        </svg>
    </div>


    <!-- ============================================================================================================== -->


    <!-- Scripts -->
    <script src="..\static\js\aos.js"></script>
    <script src="..\static\js\jquery.min.js"></script>
    <script src="..\static\js\jquery-migrate-3.0.1.min.js"></script>
    <script src="..\static\js\popper.min.js"></script>
    <script src="..\static\js\bootstrap.min.js"></script>
    <script src="..\static\js\jquery.easing.1.3.js"></script>
    <script src="..\static\js\jquery.waypoints.min.js"></script>
    <script src="..\static\js\jquery.stellar.min.js"></script>
    <script src="..\static\js\owl.carousel.min.js"></script>
    <script src="..\static\js\jquery.magnific-popup.min.js"></script>
    <script src="..\static\js\jquery.animateNumber.min.js"></script>
    <script src="..\static\js\scrollax.min.js"></script>
    <script
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
    <script src="..\static\js\google-map.js"></script>
    <script src="..\static\js\mixitup.min.js"></script>
    <script src="..\static\js\main.js"></script>

    <!-- <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script> -->
</body>

</html>

<!-- herbicides, fungicides, insecticides, cattle feed, pesticides -->